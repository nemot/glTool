<script>

  var car_types = [
  <% @car_types.each do |c| -%>
    <%= c.to_json.html_safe %>,
  <% end -%>
  ];

  var current_request = {
    id: -1,
    client_id: 0, 
    client_name: "", 
    station_from_id: 0, 
    station_from_name: "", 
    station_to_id: 0, 
    station_to_name: "", 
    load_id: <%= @request.load_id %>,
    load_name: "<%= @request.load_name %>", 
    date_of_issue: "<%= @request.date_of_issue %>", 
    valid_until: "<%= @request.valid_until%>", 
    type_of_transportation: "<%= @request.type_of_transportation %>", 
    ownership: "<%= @request.ownership %>", 
    car_type_id: 0, 
    car_type_name: "", 
    sender: "<%= @request.sender %>", 
    receiver: "<%= @request.receiver %>", 
    gu12: "<%= @request.gu12 %>", 
    rate_for_car: <%= @request.rate_for_car %>, 

    client_sum: <%= @request.client_sum %>, 
    jd_sum: <%= @request.jd_sum %>, 
    cars_num: <%= @request.cars_num %>, 
    common_tonnage: <%= @request.common_tonnage %>, 
    created_user_id: <%= current_user.id %>
  };

  var countries = [
    <% @countries.each do |c| -%>
      <%= c.to_json.html_safe %>,
    <% end -%>
  ];

  var places = [
  <% @request.places.each do |p| -%>
    <%= p.to_json(:methods=>[:expeditor_name, :country_name]).html_safe %>
  <% end -%>
  ];

  var transit_stations = [
  <% @request.transit_stations.each do |p| -%>
    <%= p.to_json(:methods=>[:station_name, :station_to_name]).html_safe %>,
  <% end -%>
  <% 4.times do |i| -%>
    // {id:<%= -1-i %>, request_id:<%= @request.id %>, station_id:null},
  <% end if @request.transit_stations.empty? %>
  ];

  var costs = [
  <% @request.costs.each do |c| -%>
    <%= c.to_json(:methods=>[:country_name]).html_safe %>
  <% end -%>
  ];

  var cars = [
  <% @request.cars.each do |c| -%>
    <%= c.to_json(:include=>[:codes],:methods=>[:rate_client, :rate_jd]).html_safe %>,
  <% end -%>
  ];
</script>





